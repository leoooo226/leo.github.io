
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Introduction/">
      
      
        <link rel="next" href="../Vortex/Introduction/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.29">
    
    
      
        <title>Tiny-gpu - leo's site</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.76a95c52.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h224V368c0-26.5 21.5-48 48-48h112V96c0-35.3-28.7-64-64-64H64zm384 320H336c-8.8 0-16 7.2-16 16v112l32-32 64-64 32-32z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm-40-176h24v-64h-24c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24h-80c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M480 32c0-12.9-7.8-24.6-19.8-29.6S434.5.2 425.3 9.3L381.7 53c-48 48-113.1 75-181 75H64c-35.3 0-64 28.7-64 64v96c0 35.3 28.7 64 64 64v128c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V352h8.7c67.9 0 133 27 181 75l43.6 43.6c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V300.4c18.6-8.8 32-32.5 32-60.4s-13.4-51.6-32-60.4V32zm-64 76.7v262.6C357.2 317.8 280.5 288 200.7 288H192v-96h8.7c79.8 0 156.5-29.8 215.3-83.3z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7l233.4-233.3c12.5-12.5 32.8-12.5 45.3 0z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm-86.2-346.7c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1 0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6-13.3 0-24-10.7-24-24v-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1 0-8.4-6.8-15.1-15.1-15.1h-58.3c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1-64 0z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7.2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8.2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24v112c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0-64 0 32 32 0 1 0 64 0z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.1 52.4 442.6 6.5c-1.9-3.9-6.1-6.5-10.5-6.5s-8.5 2.6-10.4 6.5l-16.5 45.9-46 16.8c-4.3 1.6-7.3 5.9-7.2 10.4 0 4.5 3 8.7 7.2 10.2l45.7 16.8 16.8 45.8c1.5 4.4 5.8 7.5 10.4 7.5s8.9-3.1 10.4-7.5l16.5-45.8 45.7-16.8c4.2-1.5 7.2-5.7 7.2-10.2 0-4.6-3-8.9-7.2-10.4l-45.6-16.8zm-132.4 53c-12.5-12.5-32.8-12.5-45.3 0l-2.9 2.9c-22-8-45.8-12.3-70.5-12.3C93.1 96 0 189.1 0 304s93.1 208 208 208 208-93.1 208-208c0-24.7-4.3-48.5-12.2-70.5l2.9-2.9c12.5-12.5 12.5-32.8 0-45.3l-80-80zM200 192c-57.4 0-104 46.6-104 104v8c0 8.8-7.2 16-16 16s-16-7.2-16-16v-8c0-75.1 60.9-136 136-136h8c8.8 0 16 7.2 16 16s-7.2 16-16 16h-8z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 398.9c58.5-41.1 96-104.1 96-174.9C512 100.3 397.4 0 256 0S0 100.3 0 224c0 70.7 37.5 133.8 96 174.9V464c0 26.5 21.5 48 48 48h48v-48c0-8.8 7.2-16 16-16s16 7.2 16 16v48h64v-48c0-8.8 7.2-16 16-16s16 7.2 16 16v48h48c26.5 0 48-21.5 48-48v-65.1zM96 256a64 64 0 1 1 128 0 64 64 0 1 1-128 0zm256-64a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M320 0c17.7 0 32 14.3 32 32v64h120c39.8 0 72 32.2 72 72v272c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72h120V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zM264 256a40 40 0 1 0-80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224h16v192H48c-26.5 0-48-21.5-48-48v-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48h-16V224h16z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M288 0H128c-17.7 0-32 14.3-32 32s14.3 32 32 32v132.8c0 11.8-3.3 23.5-9.5 33.5L10.3 406.2C3.6 417.2 0 429.7 0 442.6 0 480.9 31.1 512 69.4 512h309.2c38.3 0 69.4-31.1 69.4-69.4 0-12.8-3.6-25.4-10.3-36.4L329.5 230.4c-6.2-10.1-9.5-21.7-9.5-33.5V64c17.7 0 32-14.3 32-32S337.7 0 320 0h-32zm-96 196.8V64h64v132.8c0 23.7 6.6 46.9 19 67.1l34.5 56.1h-171l34.5-56.1c12.4-20.2 19-43.4 19-67.1z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M0 216C0 149.7 53.7 96 120 96h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V216zm256 0c0-66.3 53.7-120 120-120h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64h-64c-35.3 0-64-28.7-64-64V216z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra_css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tiny-gpu" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="leo&#39;s site" class="md-header__button md-logo" aria-label="leo's site" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            leo's site
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tiny-gpu
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Coprocessor/" class="md-tabs__link">
          
  
    
  
  Coprocessor

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  GPGPU

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../gem5/" class="md-tabs__link">
          
  
    
  
  gem5

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Algorithm/" class="md-tabs__link">
          
  
    
  
  Algorithm

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../about/" class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="leo&#39;s site" class="md-nav__button md-logo" aria-label="leo's site" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    leo's site
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Coprocessor/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Coprocessor
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Coprocessor
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Coprocessor/Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ISA
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            ISA
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Coprocessor/ISA/RV-Vector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RV-Vector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Coprocessor/ISA/RV-Mareix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RV-Mareix
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ara2
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Ara2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Coprocessor/Ara2/Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Coprocessor/Ara2/Top/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Top
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Coprocessor/Ara2/Axi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Axi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Coprocessor/Ara2/Dispatcher/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dispatcher
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Coprocessor/Ara2/Sequencer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sequencer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Coprocessor/Ara2/Masku/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Masku
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Coprocessor/Ara2/Sldu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sldu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Coprocessor/Ara2/Vlsu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vlsu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Coprocessor/Ara2/Lane/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lane
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Coprocessor/Ara2/CV6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CV6
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    GPGPU
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            GPGPU
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Tiny-gpu
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Tiny-gpu
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      设备控制寄存器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      调度器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      计算核心
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      内存控制器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      缓存
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core" class="md-nav__link">
    <span class="md-ellipsis">
      Core
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schedule" class="md-nav__link">
    <span class="md-ellipsis">
      Schedule
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetch" class="md-nav__link">
    <span class="md-ellipsis">
      Fetch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decode" class="md-nav__link">
    <span class="md-ellipsis">
      Decode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rf" class="md-nav__link">
    <span class="md-ellipsis">
      RF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alu" class="md-nav__link">
    <span class="md-ellipsis">
      ALU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lsu" class="md-nav__link">
    <span class="md-ellipsis">
      LSU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pc" class="md-nav__link">
    <span class="md-ellipsis">
      PC
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memory" class="md-nav__link">
    <span class="md-ellipsis">
      Memory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Memory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      全局内存
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      控制器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      存储
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#isa" class="md-nav__link">
    <span class="md-ellipsis">
      ISA
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exe" class="md-nav__link">
    <span class="md-ellipsis">
      Exe
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exe">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      启动内核
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      线程执行
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulation" class="md-nav__link">
    <span class="md-ellipsis">
      Simulation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#to-do" class="md-nav__link">
    <span class="md-ellipsis">
      To do
    </span>
  </a>
  
    <nav class="md-nav" aria-label="To do">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      多级缓存和共享内存
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      内存合并
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      流水线
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      波形调度
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      分支分歧
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      同步和屏障
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Vortex
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Vortex
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Vortex/Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Vortex/Architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Vortex/top/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Top
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Vortex/afu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Afu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Vortex/cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Vortex/core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Vortex/fpu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fpu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Vortex/interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Vortex/libs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Libs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Vortex/mem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mem
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ventus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ventus
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../gem5/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    gem5
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            gem5
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gem5/Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CPU models
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            CPU models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gem5/CPU%20models/BaseCPU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BaseCPU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gem5/CPU%20models/BaseSimpleCPU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BaseSimpleCPU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gem5/CPU%20models/AtomicSimpleCPU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AtomicSimpleCPU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gem5/CPU%20models/TimingSimpleCPU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TimingSimpleCPU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gem5/CPU%20models/MinorCPU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MinorCPU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gem5/CPU%20models/O3CPU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    O3CPU
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Algorithm/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Algorithm
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Algorithm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Algorithm/HEFT/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HEFT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Algorithm/LSTM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LSTM
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="tiny-gpu">Tiny-gpu</h1>
<h2 id="introduction"><strong>Introduction</strong></h2>
<p>Tiny-gpu是一个轻量级的 GPU 模型，专为帮助用户从头开始理解 GPU 的工作原理而设计。这是最简单的开源gpgpu项目，适合gpu入门学习。</p>
<p>项目主要侧重于探索以下方面</p>
<ul>
<li>架构 (Architecture)：GPU 的架构是什么样的？哪些元素最重要?</li>
<li>并行化 (Parallelization)：如何在硬件中实现 SIMD 编程模型？  </li>
<li>内存 (Memory)：GPU 如何应对内存带宽有限的限制？</li>
</ul>
<p>Tiny-gpu简化了执行流程，一次仅处理一个内核 (kernel)。<br />
启动内核的步骤如下</p>
<ul>
<li>加载全局程序内存：将内核代码加载到全局程序内存中。</li>
<li>加载数据内存：将必需的数据加载到数据内存中。</li>
<li>指定线程数量：在设备控制寄存器中指定要启动的线程数量。</li>
<li>启动内核：将启动信号设置为高电平，启动内核执行。</li>
</ul>
<hr />
<h2 id="architecture"><strong>Architecture</strong></h2>
<p><img alt="2" src="../result.png" />
<img alt="2" src="../gpu.png" />
Tiny-gpu 本身包含以下单元：</p>
<ul>
<li>设备控制寄存器：用于存储线程数量等控制信息。</li>
<li>调度器 (Dispatcher)：负责将任务分配给各个计算核心。</li>
<li>可变数量的计算核心：执行内核代码的处理器单元，数量可根据设计灵活配置。</li>
<li>内存控制器：分别用于控制数据内存和程序内存的访问。</li>
<li>缓存 (Cache)：用于减少对主内存的访问次数，提高数据读取速度（可能不是所有 tiny-gpu 版本都包含）。</li>
</ul>
<h3 id="_1">设备控制寄存器</h3>
<p>设备控制寄存器通常用于存储描述内核执行方式的元数据。在 tiny-gpu 中，它只存储一个值：线程数量 (thread_count)，即待激活内核需要启动的线程总数。</p>
<h3 id="_2">调度器</h3>
<p>内核启动后，调度器负责将线程分配给不同的计算核心。调度器会将线程组织成块 (block)，这些线程块可以并行地在单个核心上执行。然后，调度器将线程块发送给可用的计算核心进行处理。当所有线程块处理完成后，调度器会报告内核执行完毕。</p>
<h3 id="_3">计算核心</h3>
<p>每个核心都包含一定数量的计算资源，通常围绕着它可以支持的线程数量进行设计。为了最大化并行化，需要最佳管理这些资源以提高资源利用率。
在简化后的 tiny-gpu 中，每个核心一次处理一个线程块 (block)。为每个线程块中的线程，核心都配备了专用的 ALU、LSU、PC 和寄存器文件。管理这些资源执行线程指令是 GPU 中最具挑战性的问题之一。</p>
<h3 id="_4">内存控制器</h3>
<p>全局内存具有固定的读写带宽，但是所有计算核心访问内存的数据请求可能会远远超出外部内存的实际处理能力。<br />
内存控制器负责跟踪来自计算核心的所有传出内存请求，根据实际外部内存带宽限制请求，并将外部内存的响应传递回相应的资源。<br />
每个内存控制器根据全局内存的带宽配置了固定数量的通道。  </p>
<h3 id="_5">缓存</h3>
<p>全局内存中的相同数据经常被多个计算核心请求。反复访问全局内存代价很高，因为数据已经获取过一次，所以将数据存储在设备上的 SRAM 中以便稍后更快地检索会更有效。<br />
这就是缓存的作用。从外部内存检索到的数据会存储在缓存中，以后的请求可以直接从缓存中读取，从而释放内存带宽用于处理新数据。</p>
<hr />
<h2 id="core"><strong>Core</strong></h2>
<p><img alt="1" src="../core.png" />
每个核心都包含一定数量的计算资源，通常围绕着它可以支持的线程数量进行设计。为了最大化并行化，需要最佳管理这些资源以提高资源利用率。<br />
在简化后的 tiny-gpu 中，每个核心一次处理一个线程块 (block)。为每个线程块中的线程，核心都配备了专用的 ALU、LSU、PC 和寄存器文件。管理这些资源执行线程指令是 GPU 中最具挑战性的问题之一。</p>
<h3 id="schedule">Schedule</h3>
<p>每个核心都有一个调度器，负责管理线程的执行。
tiny-gpu 的调度器会顺序执行一个线程块中的所有线程指令，直到完成，然后再拾取一个新的线程块。它以同步的方式依次执行所有线程的指令。
在更高级的调度器中，会使用流水线 (pipelining) 等技术来流式执行后续指令，在先前指令完全完成之前最大化资源利用率。此外，还可以使用波形调度 (warp scheduling) 并行执行线程块内的多个线程批次。
调度器需要解决的主要限制是与从全局内存加载和存储数据相关的延迟。虽然大多数指令可以同步执行，但这些加载/存储操作是异步的，这意味着指令执行的其余部分必须围绕这些较长的等待时间进行构建。</p>
<h3 id="fetch">Fetch</h3>
<p>异步地从程序内存中提取当前程序计数器指向的指令（通常在执行完一个线程块后应该从缓存中提取）。</p>
<h3 id="decode">Decode</h3>
<p>将提取的指令解码成控制线程执行的控制信号。</p>
<h3 id="rf">RF</h3>
<p>每个线程都有自己专用的寄存器文件。寄存器文件保存每个线程执行计算的数据，从而实现相同指令多数据 (SIMD) 模式。<br />
值得注意的是，每个寄存器文件都包含一些只读寄存器，其中存储有关正在局部执行的当前线程块和线程的数据，使内核能够基于局部线程 ID 使用不同的数据执行。</p>
<h3 id="alu">ALU</h3>
<p>每个线程的专用算术逻辑单元用于执行计算。处理加法 (ADD)、减法 (SUB)、乘法 (MUL)、除法 (DIV) 等算术指令。
还处理比较指令 (CMP)，该指令实际上输出两个寄存器差值是负数、零还是正数的结果，并将结果存储在 PC 单元中的 NZP 寄存器中。</p>
<h3 id="lsu">LSU</h3>
<p>每个线程的专用加载存储单元用于访问全局数据内存。
处理加载 (LDR) 和存储 (STR) 指令，并处理内存请求被内存控制器处理和中继的异步等待时间。</p>
<h3 id="pc">PC</h3>
<p>每个单元的专用程序计数器用于确定每个线程接下来要执行的指令。<br />
默认情况下，PC 在每个指令后递增 1。<br />
使用分支指令 (BRnzp)，NZP 寄存器会检查 NZP 寄存器（由先前的 CMP 指令设置）是否匹配某些情况 - 如果匹配，它将跳转到程序内存的特定行。这就是循环和条件语句的实现方式。<br />
由于线程并行处理，tiny-gpu 假设所有线程在每个指令后都“收敛”到相同的程序计数器 - 这为了简化起见，是一个近似假设。<br />
在真正的GPU中，单个线程可以跳转到不同的 PC，导致分支分歧 (branch divergence)，即最初一起处理的一组线程必须分裂成单独的执行部分。</p>
<hr />
<h2 id="memory">Memory</h2>
<p>GPU 通常连接外部全局内存进行数据交互。为了简化设计，tiny-gpu 将数据内存和程序内存分开存放。</p>
<h3 id="_6">全局内存</h3>
<p>tiny-gpu数据内存具有以下规格
8 位寻址 (总共256行数据)
8 位数据 (每行存储小于 256 的值)</p>
<p>tiny-gpu程序内存具有以下规格
8 位寻址 (256行程序内存)
16 位数据 (根据指令集规定，每条指令为 16 位)</p>
<h3 id="_7">控制器</h3>
<p>全局内存具有固定的读写带宽，但是所有计算核心访问内存的数据请求可能会远远超出外部内存的实际处理能力。
内存控制器负责跟踪来自计算核心的所有传出内存请求，根据实际外部内存带宽限制请求，并将外部内存的响应传递回相应的资源。
每个内存控制器根据全局内存的带宽配置了固定数量的通道。</p>
<h3 id="_8">存储</h3>
<p>全局内存中的相同数据经常被多个计算核心请求。反复访问全局内存代价很高，因为数据已经获取过一次，所以将数据存储在设备上的 SRAM 中以便稍后更快地检索会更有效。
这就是缓存的作用。从外部内存检索到的数据会存储在缓存中，以后的请求可以直接从缓存中读取，从而释放内存带宽用于处理新数据。</p>
<h2 id="isa">ISA</h2>
<p>tiny-gpu 实现了一套简单的 11 条指令的指令集架构 (ISA)，在支持用于概念验证的简单内核，例如矩阵加法和矩阵乘法。</p>
<p><img alt="图片" src="../isa.png" /></p>
<p>实现这些功能，tiny-gpu 支持以下指令<br />
<code>BRnzp (分支指令)</code> - 如果 NZP 寄存器值满足指令中指定的 nzp 条件，则跳转到程序内存中的另一行。</p>
<p><code>CMP (比较指令)</code> - 比较两个寄存器中的值，并将结果存储在 NZP 寄存器中，供后续的 BRnzp 指令使用。</p>
<p><code>ADD、SUB、MUL、DIV (基本算术运算)</code> - 支持张量运算的基本算术操作。</p>
<p><code>LDR (加载指令)</code>- 从全局内存中加载数据。</p>
<p><code>STR (存储指令)</code> - 将数据存储到全局内存中。</p>
<p><code>CONST (常量加载指令)</code> - 将常量值加载到寄存器中。</p>
<p><code>RET (返回指令)</code> - 表示当前线程已执行完毕。</p>
<p>每个寄存器由4位指定，意味着共有16个寄存器。前13个寄存器 R0-R12 是可读写的通用寄存器。最后 3 个寄存器是特殊的只读寄存器，用于提供对 SIMD 关键的 %blockIdx、%blockDim 和 %threadIdx 值。</p>
<hr />
<h2 id="exe">Exe</h2>
<h3 id="_9">启动内核</h3>
<p>每个核心遵循以下控制流，通过不同的阶段来执行每个指令：</p>
<ol>
<li>
<p><code>获取 (FETCH)</code>：从程序内存中获取当前程序计数器指向的下一条指令。</p>
</li>
<li>
<p><code>解码 (DECODE)</code>：将指令解码成控制信号。</p>
</li>
<li>
<p><code>请求 (REQUEST)</code>：如果是加载 (LDR) 或存储 (STR) 指令，则需要从全局内存中请求数据。</p>
</li>
<li>
<p><code>等待 (WAIT)</code>：如果适用，等待来自全局内存的数据。</p>
</li>
<li>
<p><code>执行 (EXECUTE)</code>：对数据执行任何计算。</p>
</li>
<li>
<p><code>更新 (UPDATE)</code>：更新寄存器文件和 NZP 寄存器。</p>
</li>
</ol>
<p>简化理解，控制流程被这样划分开来。
实际上，为了优化处理时间，其中几个步骤可以被压缩。GPU 还可以使用流水线 (pipelining) 技术在核心资源上流式协调执行许多指令，而无需等待先前指令完成。</p>
<h3 id="_10">线程执行</h3>
<p>在每个核心内的每个线程都会遵循上述执行路径，对其专用寄存器文件中的数据执行计算。
这类似于标准的 CPU 架构图，在功能上也相当相似。主要区别在于每个线程的只读寄存器中包含 %blockIdx、%blockDim 和 %threadIdx 值，从而实现 SIMD 功能。
<img alt="图片" src="../thread.png" /></p>
<hr />
<h2 id="simulation">Simulation</h2>
<p>tiny-gpu 可以模拟上述两种内核的执行。在进行模拟之前，您需要安装 iverilog 和 cocotb。<br />
安装完先决条件后，您可以使用 make test_matadd 和 make test_matmul 运行内核模拟。<br />
执行模拟将在 test/logs 中输出一个日志文件，其中包含初始数据内存状态、内核的完整执行跟踪以及最终数据内存状态。<br />
如果您查看每个日志文件开头记录的初始数据内存状态，您应该会看到用于计算的两个起始矩阵，并且在文件末尾的最终数据内存中，您还应该会看到结果矩阵。</p>
<hr />
<h2 id="to-do">To do</h2>
<p>tiny-gpu 省略了许多现代 GPU 中实现的额外功能，这些功能可以大大提高性能和功能。本节将讨论其中一些最关键的特性。</p>
<h3 id="_11">多级缓存和共享内存</h3>
<p>在现代 GPU 中，使用多个不同级别的缓存来最小化需要从全局内存访问的数据量。tiny-gpu 只在请求内存的单个计算单元和存储最近缓存数据的内存控制器之间实现了一个缓存层。</p>
<p>实现多级缓存允许将经常访问的数据更本地地缓存到其使用位置（某些缓存位于单个计算核心内），从而最小化此数据的加载时间。不同的缓存算法用于最大化缓存命中率 - 这是一个可以通过优化内存访问来改善的关键方面。</p>
<p>此外，GPU 经常使用共享内存，使同一块中的线程可以访问单个内存空间，该空间可以用来与其他线程共享结果。</p>
<h3 id="_12">内存合并</h3>
<p>GPU 使用的另一个关键内存优化是内存合并。并行运行的多个线程通常需要访问内存中的连续地址（例如，一组线程访问矩阵中的相邻元素），但是每个内存请求都单独提交。</p>
<p>内存合并用于分析排队的内存请求并将相邻请求合并成单个事务，从而最大限度地减少寻址时间并一起发出所有请求。</p>
<h3 id="_13">流水线</h3>
<p>在 tiny-gpu 的控制流中，内核会在对一组线程执行一条指令后才开始执行下一条指令。</p>
<p>现代 GPU 使用流水线来一次流式执行多个顺序指令，同时确保相互依赖的指令仍然按顺序执行。这有助于最大化内核内的资源利用率，因为资源不会在等待时闲置（例如：异步内存请求期间）。</p>
<h3 id="_14">波形调度</h3>
<p>另一种用于最大化资源利用率的策略是波形调度。这种方法涉及将块分解成可以一起执行的单独线程批处理。可以在单个核心上同时执行多个波形，方法是在一个波形等待时从另一个波形执行指令。这类似于流水线，但处理来自不同线程的指令。</p>
<h3 id="_15">分支分歧</h3>
<p>tiny-gpu 假设单个批处理中的所有线程在每个指令后都最终位于相同的 PC 上，这意味着线程可以并行执行其整个生命周期。</p>
<p>实际上，单个线程可以相互分歧并根据其数据分支到不同的行。使用不同的 PC，这些线程需要拆分成本质上不同的执行线路，这需要管理发散的线程并注意线程何时再次收敛。</p>
<h3 id="_16">同步和屏障</h3>
<p>现代 GPU 的另一个核心功能是能够设置屏障，以便块中的线程组可以同步并等待同一块中的所有其他线程到达某个点然后再继续执行。
这对于线程需要相互交换共享数据的情况很有用，因此它们可以确保数据已完全处理。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.top", "toc.integrate", "search.suggest", "search.highlight", "search.share", "navigation.indexes", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>